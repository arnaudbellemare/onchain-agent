"use strict";(()=>{var e={};e.id=348,e.ids=[348],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4475:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>y});var n={};o.r(n),o.d(n,{POST:()=>l});var r=o(9303),s=o(8716),a=o(670),i=o(7070);async function l(e){try{let{projectId:t,files:o,framework:n="react",useOptimization:r=!0}=await e.json();if(!t||!o||0===o.length)return i.NextResponse.json({success:!1,error:"Project ID and files are required"},{status:400});console.log(`[VibeSDK] Deploying project: ${t} with ${o.length} files`);let s=`deploy-${t}-${Date.now()}`,a=await Promise.all(o.map(async e=>(console.log(`[VibeSDK] Writing file: ${e.path}`),{path:e.path,status:"written",size:e.content.length})));console.log(`[VibeSDK] Installing dependencies for ${n}`),await c(n),console.log("[VibeSDK] Building project");let l=await u(n);console.log("[VibeSDK] Deploying to Cloudflare Workers");let m=await p(t,n),g=null;return r&&(console.log("[VibeSDK] Processing x402 micropayment for cost optimization"),g=await d(t)),console.log(`[VibeSDK] Deployment completed: ${m.url}`),i.NextResponse.json({success:!0,result:{projectId:t,deployment:{url:m.url,status:"deployed",sandboxId:s,framework:n},files:{total:o.length,written:a.length,totalSize:o.reduce((e,t)=>e+t.content.length,0)},build:{status:l.status,output:l.output},optimization:{enabled:r,paymentProcessed:g?g.status:"skipped",transactionId:g?g.transactionId:null,costSavings:"Real-time AI cost optimization active"},vibe_platform:{integration:"OnChain Agent + VibeSDK",deployment:"Cloudflare Workers",cost_optimization:"Real-time AI cost reduction",blockchain_payments:"x402 micropayments enabled",revenue_model:"13% fee on cost savings"},timestamp:new Date().toISOString()}})}catch(e){return console.error("VibeSDK deployment error:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error occurred"},{status:500})}}async function c(e){let t={react:["react","react-dom","@types/react","@types/react-dom"],next:["next","react","react-dom"],vue:["vue","@vue/cli-service"]}[e]||["react","react-dom"];return{status:"success",output:`Installed ${t.length} dependencies: ${t.join(", ")}`}}async function u(e){return{status:"success",output:`Build completed using: ${({react:"npm run build",next:"next build",vue:"npm run build"})[e]||"npm run build"}`}}async function p(e,t){let o=`https://vibe-demo-${e}.vercel.app`;return console.log(`[VibeSDK] Demo deployment created: ${o}`),{url:o,status:"deployed"}}async function d(e){return{status:"success",transactionId:`x402_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}let m=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/deploy/route",pathname:"/api/deploy",filename:"route",bundlePath:"app/api/deploy/route"},resolvedPagePath:"/Users/cno/onchain-agent-2/vibe-platform/src/app/api/deploy/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:y,serverHooks:h}=m,b="/api/deploy/route";function f(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:y})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[276,972],()=>o(4475));module.exports=n})();