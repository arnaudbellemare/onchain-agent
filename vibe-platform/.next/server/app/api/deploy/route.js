"use strict";(()=>{var e={};e.id=348,e.ids=[348],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4475:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>u});var n={};o.r(n),o.d(n,{POST:()=>l});var r=o(9303),i=o(8716),s=o(670),a=o(7070);async function l(e){try{let{projectId:t,files:o,framework:n="react",useOptimization:r=!0}=await e.json();if(!t||!o||0===o.length)return a.NextResponse.json({success:!1,error:"Project ID and files are required"},{status:400});console.log(`[VibeSDK] Deploying project: ${t} with ${o.length} files`);let i=`deploy-${t}-${Date.now()}`,s=await Promise.all(o.map(async e=>(console.log(`[VibeSDK] Writing file: ${e.path}`),{path:e.path,status:"written",size:e.content.length})));console.log(`[VibeSDK] Installing dependencies for ${n}`),await this.installDependencies(n),console.log("[VibeSDK] Building project");let l=await this.buildProject(n);console.log("[VibeSDK] Deploying to Cloudflare Workers");let p=await this.deployToWorkers(t,n);return r&&(console.log("[VibeSDK] Processing x402 micropayment for cost optimization"),await this.processOptimizationPayment(t)),console.log(`[VibeSDK] Deployment completed: ${p.url}`),a.NextResponse.json({success:!0,result:{projectId:t,deployment:{url:p.url,status:"deployed",sandboxId:i,framework:n},files:{total:o.length,written:s.length,totalSize:o.reduce((e,t)=>e+t.content.length,0)},build:{status:l.status,output:l.output},optimization:{enabled:r,paymentProcessed:r,costSavings:"Real-time AI cost optimization active"},vibe_platform:{integration:"OnChain Agent + VibeSDK",deployment:"Cloudflare Workers",cost_optimization:"Real-time AI cost reduction",blockchain_payments:"x402 micropayments enabled",revenue_model:"13% fee on cost savings"},timestamp:new Date().toISOString()}})}catch(e){return console.error("VibeSDK deployment error:",e),a.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error occurred"},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/deploy/route",pathname:"/api/deploy",filename:"route",bundlePath:"app/api/deploy/route"},resolvedPagePath:"/Users/cno/onchain-agent-2/vibe-platform/src/app/api/deploy/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:u,serverHooks:d}=p,m="/api/deploy/route";function g(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:u})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[276,972],()=>o(4475));module.exports=n})();